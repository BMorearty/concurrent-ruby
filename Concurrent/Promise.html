<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Concurrent::Promise
  
    &mdash; Concurrent
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!Concurrent/Promise.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (P)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span>
     &raquo; 
    <span class="title">Promise</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Concurrent::Promise
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Concurrent::Promise</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="Obligation.html" title="Concurrent::Obligation (module)">Obligation</a></span></dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/concurrent/promise.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>Promises are inspired by the JavaScript <a href="http://wiki.commonjs.org/wiki/Promises/A">Promises/A</a>
and <a href="http://promises-aplus.github.io/promises-spec/">Promises/A+</a> specifications.</p>

<blockquote>
<p>A promise represents the eventual value returned from the single completion of an operation.</p>
</blockquote>

<p>Promises are similar to futures and share many of the same behaviours. Promises are far more
robust, however. Promises can be chained in a tree structure where each promise may have zero
or more children. Promises are chained using the <code>then</code> method. The result of a call to <code>then</code>
is always another promise. Promises are resolved asynchronously (with respect to the main thread)
but in a strict order: parents are guaranteed to be resolved before their children, children
before their younger siblings. The <code>then</code> method takes two parameters: an optional block to
be executed upon parent resolution and an optional callable to be executed upon parent failure.
The result of each promise is passed to each of its children upon resolution. When a promise
is rejected all its children will be summarily rejected and will receive the reason. </p>

<p>Promises have four possible states: <em>unscheduled</em>, <em>pending</em>, <em>rejected</em>, and <em>fulfilled</em>. A
Promise created using <code>.new</code> will be <em>unscheduled</em>. It is scheduled by calling the <code>execute</code>
method. Upon execution the Promise and all its children will be set to <em>pending</em>. When a promise
is <em>pending</em> it will remain in that state until processing is complete. A completed Promise is
either <em>rejected</em>, indicating that an exception was thrown during processing, or <em>fulfilled</em>,
indicating it succeeded. If a Promise is <em>fulfilled</em> its <code>value</code> will be updated to reflect
the result of the operation. If <em>rejected</em> the <code>reason</code> will be updated with a reference to
the thrown exception. The predicate methods <code>unscheduled?</code>, <code>pending?</code>, <code>rejected?</code>, and
<code>fulfilled?</code> can be called at any time to obtain the state of the Promise, as can the <code>state</code>
method, which returns a symbol. A Promise created using <code>.execute</code> will be <em>pending</em>, a Promise
created using <code>.fulfill(value)</code> will be <em>fulfilled</em> with the given value and a Promise created
using <code>.reject(reason)</code> will be <em>rejected</em> with the given reason. </p>

<p>Retrieving the value of a promise is done through the <code>value</code> (alias: <code>deref</code>) method. Obtaining
the value of a promise is a potentially blocking operation. When a promise is <em>rejected</em> a call
to <code>value</code> will return <code>nil</code> immediately. When a promise is <em>fulfilled</em> a call to <code>value</code> will
immediately return the current value. When a promise is <em>pending</em> a call to <code>value</code> will block
until the promise is either <em>rejected</em> or <em>fulfilled</em>. A <em>timeout</em> value can be passed to <code>value</code>
to limit how long the call will block. If <code>nil</code> the call will block indefinitely. If <code>0</code> the call
will not block. Any other integer or float value will indicate the maximum number of seconds to block. </p>

<p>Promises run on the global thread pool.</p>

<h3>Examples</h3>

<p>Start by requiring promises</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_require'>require</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>concurrent</span><span class='tstring_end'>&#39;</span></span>
</code></pre>

<p>Then create one</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Promise</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span> <span class='kw'>do</span>
      <span class='comment'># do something
</span>      <span class='int'>42</span>
    <span class='kw'>end</span>
</code></pre>

<p>Promises can be chained using the <code>then</code> method. The <code>then</code> method accepts a block, to be executed
on fulfillment, and a callable argument to be executed on rejection. The result of the each promise
is passed as the block argument to chained promises. </p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Promise</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lbrace'>{</span><span class='int'>10</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_then'>then</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span> <span class='op'>*</span> <span class='int'>2</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_then'>then</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_result'>result</span><span class='op'>|</span> <span class='id identifier rubyid_result'>result</span> <span class='op'>-</span> <span class='int'>10</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span>
</code></pre>

<p>And so on, and so on, and so on...</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Promise</span><span class='period'>.</span><span class='id identifier rubyid_fulfill'>fulfill</span><span class='lparen'>(</span><span class='int'>20</span><span class='rparen'>)</span><span class='period'>.</span>
    <span class='id identifier rubyid_then'>then</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_result'>result</span><span class='op'>|</span> <span class='id identifier rubyid_result'>result</span> <span class='op'>-</span> <span class='int'>10</span> <span class='rbrace'>}</span><span class='period'>.</span>
    <span class='id identifier rubyid_then'>then</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_result'>result</span><span class='op'>|</span> <span class='id identifier rubyid_result'>result</span> <span class='op'>*</span> <span class='int'>3</span> <span class='rbrace'>}</span><span class='period'>.</span>
    <span class='id identifier rubyid_then'>then</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_result'>result</span><span class='op'>|</span> <span class='id identifier rubyid_result'>result</span> <span class='op'>%</span> <span class='int'>5</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span>
</code></pre>

<p>The initial state of a newly created Promise depends on the state of its parent:</p>

<ul>
<li>if parent is <em>unscheduled</em> the child will be <em>unscheduled</em></li>
<li>if parent is <em>pending</em> the child will be <em>pending</em></li>
<li>if parent is <em>fulfilled</em> the child will be <em>pending</em></li>
<li>if parent is <em>rejected</em> the child will be <em>pending</em> (but will ultimately be <em>rejected</em>)</li>
</ul>

<p>Promises are executed asynchronously from the main thread. By the time a child Promise finishes 
nitialization it may be in a different state that its parent (by the time a child is created its parent
may have completed execution and changed state). Despite being asynchronous, however, the order of
execution of Promise objects in a chain (or tree) is strictly defined. </p>

<p>There are multiple ways to create and execute a new <code>Promise</code>. Both ways provide identical behavior:</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># create, operate, then execute
</span><span class='id identifier rubyid_p1'>p1</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Promise</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello World!</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_p1'>p1</span><span class='period'>.</span><span class='id identifier rubyid_state'>state</span> <span class='comment'>#=&gt; :unscheduled
</span><span class='id identifier rubyid_p1'>p1</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span>

<span class='comment'># create and immediately execute
</span><span class='id identifier rubyid_p2'>p2</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Promise</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello World!</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span>

<span class='comment'># execute during creation
</span><span class='id identifier rubyid_p3'>p3</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Promise</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello World!</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
</code></pre>

<p>Once the <code>execute</code> method is called a <code>Promise</code> becomes <code>pending</code>:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Promise</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello, world!</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_state'>state</span>    <span class='comment'>#=&gt; :pending
</span><span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_pending?'>pending?</span> <span class='comment'>#=&gt; true
</span></code></pre>

<p>Wait a little bit, and the promise will resolve and provide a value:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Promise</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello, world!</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_sleep'>sleep</span><span class='lparen'>(</span><span class='float'>0.1</span><span class='rparen'>)</span>

<span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_state'>state</span>      <span class='comment'>#=&gt; :fulfilled
</span><span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_fulfilled?'>fulfilled?</span> <span class='comment'>#=&gt; true
</span><span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span>      <span class='comment'>#=&gt; &quot;Hello, world!&quot;
</span></code></pre>

<p>If an exception occurs, the promise will be rejected and will provide
a reason for the rejection:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Promise</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lbrace'>{</span> <span class='id identifier rubyid_raise'>raise</span> <span class='const'>StandardError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Here comes the Boom!</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_sleep'>sleep</span><span class='lparen'>(</span><span class='float'>0.1</span><span class='rparen'>)</span>

<span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_state'>state</span>     <span class='comment'>#=&gt; :rejected
</span><span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_rejected?'>rejected?</span> <span class='comment'>#=&gt; true
</span><span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_reason'>reason</span>    <span class='comment'>#=&gt; &quot;#&lt;StandardError: Here comes the Boom!&gt;&quot;
</span></code></pre>

<h4>Rejection</h4>

<p>When a promise is rejected all its children will be rejected and will receive the rejection <code>reason</code>
as the rejection callable parameter:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_p'>p</span> <span class='op'>=</span> <span class='lbracket'>[</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Promise</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lbrace'>{</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id identifier rubyid_pass'>pass</span><span class='semicolon'>;</span> <span class='id identifier rubyid_raise'>raise</span> <span class='const'>StandardError</span> <span class='rbrace'>}</span> <span class='rbracket'>]</span>

<span class='id identifier rubyid_c1'>c1</span> <span class='op'>=</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_then'>then</span><span class='lparen'>(</span><span class='const'>Proc</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_reason'>reason</span><span class='op'>|</span> <span class='int'>42</span> <span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='id identifier rubyid_c2'>c2</span> <span class='op'>=</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_then'>then</span><span class='lparen'>(</span><span class='const'>Proc</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_reason'>reason</span><span class='op'>|</span> <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Boom!</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span><span class='rparen'>)</span>

<span class='id identifier rubyid_sleep'>sleep</span><span class='lparen'>(</span><span class='float'>0.1</span><span class='rparen'>)</span>

<span class='id identifier rubyid_c1'>c1</span><span class='period'>.</span><span class='id identifier rubyid_state'>state</span>  <span class='comment'>#=&gt; :rejected
</span><span class='id identifier rubyid_c2'>c2</span><span class='period'>.</span><span class='id identifier rubyid_state'>state</span>  <span class='comment'>#=&gt; :rejected
</span></code></pre>

<p>Once a promise is rejected it will continue to accept children that will receive immediately rejection
(they will be executed asynchronously).</p>

<h4>Aliases</h4>

<p>The <code>then</code> method is the most generic alias: it accepts a block to be executed upon parent fulfillment
and a callable to be executed upon parent rejection. At least one of them should be passed. The default
block is <code>{ |result| result }</code> that fulfills the child with the parent value. The default callable is
<code>{ |reason| raise reason }</code> that rejects the child with the parent reason. </p>

<ul>
<li><code>on_success { |result| ... }</code> is the same as <code>then {|result| ... }</code></li>
<li><code>rescue { |reason| ... }</code> is the same as <code>then(Proc.new { |reason| ... } )</code></li>
<li><code>rescue</code> is aliased by <code>catch</code> and <code>on_error</code></li>
</ul>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#aggregate-class_method" title="aggregate (class method)">+ (Promise) <strong>aggregate</strong>(method, *promises) </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Aggregate a collection of zero or more promises under a composite promise, execute the aggregated promises and collect them into a standard Ruby array, call the given Ruby <code>Ennnumerable</code> predicate (such as <code>any?</code>, <code>all?</code>, <code>none?</code>, or <code>one?</code>) on the collection checking for the success or failure of each, then executing the composite&#39;s <code>#then</code> handlers if the predicate returns <code>true</code> or executing the composite&#39;s <code>#rescue</code> handlers if the predicate returns false.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all%3F-class_method" title="all? (class method)">+ (Boolean) <strong>all?</strong>(*promises) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Aggregates a collection of promises and executes the <code>then</code> condition if all aggregated promises succeed.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#any%3F-class_method" title="any? (class method)">+ (Promise) <strong>any?</strong>(*promises) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Aggregates a collection of promises and executes the <code>then</code> condition if any aggregated promises succeed.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#execute-class_method" title="execute (class method)">+ (Object) <strong>execute</strong>(opts = {}, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fulfill-class_method" title="fulfill (class method)">+ (Promise) <strong>fulfill</strong>(value, opts = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reject-class_method" title="reject (class method)">+ (Promise) <strong>reject</strong>(reason, opts = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#zip-class_method" title="zip (class method)">+ (Promise&lt;Array&gt;) <strong>zip</strong>(*promises) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Builds a promise that produces the result of promises in an Array and fails if any of them fails.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#completed%3F-instance_method" title="#completed? (instance method)">- (Boolean) <strong>completed?</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Obligation.html#completed%3F-instance_method" title="Concurrent::Obligation#completed? (method)">Obligation</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#exception-instance_method" title="#exception (instance method)">- (Object) <strong>exception</strong>(*args) </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Obligation.html#exception-instance_method" title="Concurrent::Obligation#exception (method)">Obligation</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#execute-instance_method" title="#execute (instance method)">- (Promise) <strong>execute</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#flat_map-instance_method" title="#flat_map (instance method)">- (Promise) <strong>flat_map</strong>(&amp;block) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Yield the successful result to the block that returns a promise.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fulfilled%3F-instance_method" title="#fulfilled? (instance method)">- (Boolean) <strong>fulfilled?</strong> </a>
    

    
      (also: #realized?)
    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Obligation.html#fulfilled%3F-instance_method" title="Concurrent::Obligation#fulfilled? (method)">Obligation</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Has the obligation been fulfilled?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#incomplete%3F-instance_method" title="#incomplete? (instance method)">- (Boolean) <strong>incomplete?</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Obligation.html#incomplete%3F-instance_method" title="Concurrent::Obligation#incomplete? (method)">Obligation</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#init_mutex-instance_method" title="#init_mutex (instance method)">- (Object) <strong>init_mutex</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Dereferenceable.html#init_mutex-instance_method" title="Concurrent::Dereferenceable#init_mutex (method)">Dereferenceable</a></span>
    </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Initializes the internal <code>Mutex</code>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Promise) <strong>initialize</strong>(opts = {}, &amp;block) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Initialize a new Promise with the provided options.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#mutex-instance_method" title="#mutex (instance method)">- (Mutex) <strong>mutex</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Dereferenceable.html#mutex-instance_method" title="Concurrent::Dereferenceable#mutex (method)">Dereferenceable</a></span>
    </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A mutex lock used for synchronizing thread-safe operations.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#no_error%21-instance_method" title="#no_error! (instance method)">- (Obligation) <strong>no_error!</strong>(timeout = nil) </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Obligation.html#no_error%21-instance_method" title="Concurrent::Obligation#no_error! (method)">Obligation</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>wait until Obligation is #complete?.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#notify_child-instance_method" title="#notify_child (instance method)">- (Object) <strong>notify_child</strong>(child) </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#on_success-instance_method" title="#on_success (instance method)">- (Promise) <strong>on_success</strong>(&amp;block) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pending%3F-instance_method" title="#pending? (instance method)">- (Boolean) <strong>pending?</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Obligation.html#pending%3F-instance_method" title="Concurrent::Obligation#pending? (method)">Obligation</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Is obligation completion still pending?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reason-instance_method" title="#reason (instance method)">- (Object) <strong>reason</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Obligation.html#reason-instance_method" title="Concurrent::Obligation#reason (method)">Obligation</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rejected%3F-instance_method" title="#rejected? (instance method)">- (Boolean) <strong>rejected?</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Obligation.html#rejected%3F-instance_method" title="Concurrent::Obligation#rejected? (method)">Obligation</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Has the obligation been rejected?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rescue-instance_method" title="#rescue (instance method)">- (Promise) <strong>rescue</strong>(&amp;block) </a>
    

    
      (also: #catch, #on_error)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#set_deref_options-instance_method" title="#set_deref_options (instance method)">- (Object) <strong>set_deref_options</strong>(opts = {}) </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Dereferenceable.html#set_deref_options-instance_method" title="Concurrent::Dereferenceable#set_deref_options (method)">Dereferenceable</a></span>
    </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Set the options which define the operations #value performs before returning data to the caller (dereferencing).</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#set_pending-instance_method" title="#set_pending (instance method)">- (Object) <strong>set_pending</strong> </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#set_state%21-instance_method" title="#set_state! (instance method)">- (Object) <strong>set_state!</strong>(success, value, reason) </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#state-instance_method" title="#state (instance method)">- (Object) <strong>state</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Obligation.html#state-instance_method" title="Concurrent::Obligation#state (method)">Obligation</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#synchronized_set_state%21-instance_method" title="#synchronized_set_state! (instance method)">- (Object) <strong>synchronized_set_state!</strong>(success, value, reason) </a>
    

    
  </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#then-instance_method" title="#then (instance method)">- (Promise) <strong>then</strong>(rescuer = nil, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The new promise.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unscheduled%3F-instance_method" title="#unscheduled? (instance method)">- (Boolean) <strong>unscheduled?</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Obligation.html#unscheduled%3F-instance_method" title="Concurrent::Obligation#unscheduled? (method)">Obligation</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Is the obligation still unscheduled?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#value-instance_method" title="#value (instance method)">- (Object) <strong>value</strong>(timeout = nil) </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Obligation.html#value-instance_method" title="Concurrent::Obligation#value (method)">Obligation</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>See Dereferenceable#deref.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#value%21-instance_method" title="#value! (instance method)">- (Object) <strong>value!</strong>(timeout = nil) </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Obligation.html#value%21-instance_method" title="Concurrent::Obligation#value! (method)">Obligation</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>See Dereferenceable#deref.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#value%3D-instance_method" title="#value= (instance method)">- (Object) <strong>value=</strong>(val) </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Dereferenceable.html#value%3D-instance_method" title="Concurrent::Dereferenceable#value= (method)">Dereferenceable</a></span>
    </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Set the internal value of this object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#wait-instance_method" title="#wait (instance method)">- (Obligation) <strong>wait</strong>(timeout = nil) </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Obligation.html#wait-instance_method" title="Concurrent::Obligation#wait (method)">Obligation</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>wait until Obligation is #complete?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#zip-instance_method" title="#zip (instance method)">- (Promise&lt;Array&gt;) <strong>zip</strong>(*others) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Builds a promise that produces the result of self and others in an Array and fails if any of them fails.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Concurrent::Promise (class)">Promise</a></span></tt>) <strong>initialize</strong>(opts = {}, &amp;block) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Initialize a new Promise with the provided options.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>opts</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the options used to define the behavior at update and deref</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <p class="tag_title">Options Hash (<tt>opts</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:parent</span>
          <span class="type">(<tt><span class='object_link'><a href="" title="Concurrent::Promise (class)">Promise</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>the parent <code>Promise</code> when building a chain/tree</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:on_fulfill</span>
          <span class="type">(<tt>Proc</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>fulfillment handler</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:on_reject</span>
          <span class="type">(<tt>Proc</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>rejection handler</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:operation</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>false</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>when <code>true</code> will execute the future on the global
operation pool (for long-running operations), when <code>false</code> will execute the future on the
global task pool (for short-running tasks)</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:executor</span>
          <span class="type">(<tt>object</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>when provided will run all operations on
this executor rather than the global thread pool (overrides :operation)</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:dup_on_deref</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>false</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>call <code>#dup</code> before returning the data</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:freeze_on_deref</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>false</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>call <code>#freeze</code> before returning the data</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:copy_on_deref</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>call the given <code>Proc</code> passing the internal value and
returning the value returned from the proc</p>
</div>
          
        </li>
      
    </ul>
  
    
    


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="http://wiki.commonjs.org/wiki/Promises/A" target="_parent" title="http://wiki.commonjs.org/wiki/Promises/A">http://wiki.commonjs.org/wiki/Promises/A</a></li>
    
      <li><a href="http://promises-aplus.github.io/promises-spec/" target="_parent" title="http://promises-aplus.github.io/promises-spec/">http://promises-aplus.github.io/promises-spec/</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


194
195
196
197
198
199
200
201
202
203
204
205
206
207
208</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/promise.rb', line 194</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_delete_if'>delete_if</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span> <span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='rbrace'>}</span>

  <span class='ivar'>@executor</span> <span class='op'>=</span> <span class='const'>OptionsParser</span><span class='op'>::</span><span class='id identifier rubyid_get_executor_from'>get_executor_from</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='const'>Concurrent</span><span class='period'>.</span><span class='id identifier rubyid_configuration'>configuration</span><span class='period'>.</span><span class='id identifier rubyid_global_operation_pool'>global_operation_pool</span>
  <span class='ivar'>@parent</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:parent</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='kw'>nil</span> <span class='rbrace'>}</span>
  <span class='ivar'>@on_fulfill</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:on_fulfill</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='const'>Proc</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_result'>result</span><span class='op'>|</span> <span class='id identifier rubyid_result'>result</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
  <span class='ivar'>@on_reject</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:on_reject</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='const'>Proc</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_reason'>reason</span><span class='op'>|</span> <span class='id identifier rubyid_raise'>raise</span> <span class='id identifier rubyid_reason'>reason</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>

  <span class='ivar'>@promise_body</span> <span class='op'>=</span> <span class='id identifier rubyid_block'>block</span> <span class='op'>||</span> <span class='const'>Proc</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_result'>result</span><span class='op'>|</span> <span class='id identifier rubyid_result'>result</span> <span class='rbrace'>}</span>
  <span class='ivar'>@state</span> <span class='op'>=</span> <span class='symbol'>:unscheduled</span>
  <span class='ivar'>@children</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_init_obligation'>init_obligation</span>
  <span class='id identifier rubyid_set_deref_options'>set_deref_options</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="aggregate-class_method">
  
    + (<tt><span class='object_link'><a href="" title="Concurrent::Promise (class)">Promise</a></span></tt>) <strong>aggregate</strong>(method, *promises)  <span class="extras">(protected)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Aggregate a collection of zero or more promises under a composite promise,
execute the aggregated promises and collect them into a standard Ruby array,
call the given Ruby <code>Ennnumerable</code> predicate (such as <code>any?</code>, <code>all?</code>, <code>none?</code>,
or <code>one?</code>) on the collection checking for the success or failure of each,
then executing the composite&#39;s <code>#then</code> handlers if the predicate returns
<code>true</code> or executing the composite&#39;s <code>#rescue</code> handlers if the predicate
returns false.</p>

<p>The returned promise will not yet have been executed. Additional <code>#then</code>
and <code>#rescue</code> handlers may still be provided. Once the returned promise
is execute the aggregate promises will be also be executed (if they have
not been executed already). The results of the aggregate promises will
be checked upon completion. The necessary <code>#then</code> and <code>#rescue</code> blocks
on the aggregating promise will then be executed as appropriate. If the
<code>#rescue</code> handlers are executed the raises exception will be
<code>Concurrent::PromiseExecutionError</code>.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>promises</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Zero or more promises to aggregate</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Concurrent::Promise (class)">Promise</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>an unscheduled (not executed) promise that aggregates
the promises given as arguments</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


378
379
380
381
382
383
384
385
386
387
388
389
390</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/promise.rb', line 378</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_aggregate'>aggregate</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_promises'>promises</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_composite'>composite</span> <span class='op'>=</span> <span class='const'>Promise</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_completed'>completed</span> <span class='op'>=</span> <span class='id identifier rubyid_promises'>promises</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_promise'>promise</span><span class='op'>|</span>
      <span class='id identifier rubyid_promise'>promise</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span> <span class='kw'>if</span> <span class='id identifier rubyid_promise'>promise</span><span class='period'>.</span><span class='id identifier rubyid_unscheduled?'>unscheduled?</span>
      <span class='id identifier rubyid_promise'>promise</span><span class='period'>.</span><span class='id identifier rubyid_wait'>wait</span>
      <span class='id identifier rubyid_promise'>promise</span>
    <span class='kw'>end</span>
    <span class='kw'>unless</span> <span class='id identifier rubyid_completed'>completed</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span> <span class='op'>||</span> <span class='id identifier rubyid_completed'>completed</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_method'>method</span><span class='rparen'>)</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_promise'>promise</span><span class='op'>|</span> <span class='id identifier rubyid_promise'>promise</span><span class='period'>.</span><span class='id identifier rubyid_fulfilled?'>fulfilled?</span> <span class='rbrace'>}</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='const'>PromiseExecutionError</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_composite'>composite</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="all?-class_method">
  
    + (<tt>Boolean</tt>) <strong>all?</strong>(*promises) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Aggregates a collection of promises and executes the <code>then</code> condition
if all aggregated promises succeed. Executes the <code>rescue</code> handler with
a <code>Concurrent::PromiseExecutionError</code> if any of the aggregated promises
fail. Upon execution will execute any of the aggregate promises that
were not already executed.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


352
353
354</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/promise.rb', line 352</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_all?'>all?</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_promises'>promises</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_aggregate'>aggregate</span><span class='lparen'>(</span><span class='symbol'>:all?</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_promises'>promises</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="any?-class_method">
  
    + (<tt><span class='object_link'><a href="" title="Concurrent::Promise (class)">Promise</a></span></tt>) <strong>any?</strong>(*promises) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Aggregates a collection of promises and executes the <code>then</code> condition
if any aggregated promises succeed. Executes the <code>rescue</code> handler with
a <code>Concurrent::PromiseExecutionError</code> if any of the aggregated promises
fail. Upon execution will execute any of the aggregate promises that
were not already executed.</p>

<p>The returned promise will not yet have been executed. Additional <code>#then</code>
and <code>#rescue</code> handlers may still be provided. Once the returned promise
is execute the aggregate promises will be also be executed (if they have
not been executed already). The results of the aggregate promises will
be checked upon completion. The necessary <code>#then</code> and <code>#rescue</code> blocks
on the aggregating promise will then be executed as appropriate. If the
<code>#rescue</code> handlers are executed the raises exception will be
<code>Concurrent::PromiseExecutionError</code>.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>promises</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Zero or more promises to aggregate</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Concurrent::Promise (class)">Promise</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>an unscheduled (not executed) promise that aggregates
the promises given as arguments</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


363
364
365</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/promise.rb', line 363</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_any?'>any?</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_promises'>promises</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_aggregate'>aggregate</span><span class='lparen'>(</span><span class='symbol'>:any?</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_promises'>promises</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="execute-class_method">
  
    + (<tt>Object</tt>) <strong>execute</strong>(opts = {}, &amp;block) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.5.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


236
237
238</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/promise.rb', line 236</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fulfill-class_method">
  
    + (<tt><span class='object_link'><a href="" title="Concurrent::Promise (class)">Promise</a></span></tt>) <strong>fulfill</strong>(value, opts = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Concurrent::Promise (class)">Promise</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


211
212
213</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/promise.rb', line 211</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_fulfill'>fulfill</span><span class='lparen'>(</span><span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='const'>Promise</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_tap'>tap</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='symbol'>:synchronized_set_state!</span><span class='comma'>,</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reject-class_method">
  
    + (<tt><span class='object_link'><a href="" title="Concurrent::Promise (class)">Promise</a></span></tt>) <strong>reject</strong>(reason, opts = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Concurrent::Promise (class)">Promise</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


217
218
219</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/promise.rb', line 217</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_reject'>reject</span><span class='lparen'>(</span><span class='id identifier rubyid_reason'>reason</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='const'>Promise</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_tap'>tap</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_p'>p</span><span class='op'>|</span> <span class='id identifier rubyid_p'>p</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='symbol'>:synchronized_set_state!</span><span class='comma'>,</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_reason'>reason</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="zip-class_method">
  
    + (<tt><span class='object_link'><a href="" title="Concurrent::Promise (class)">Promise</a></span>&lt;Array&gt;</tt>) <strong>zip</strong>(*promises) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Builds a promise that produces the result of promises in an Array
and fails if any of them fails.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>promises</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="" title="Concurrent::Promise (class)">Promise</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Concurrent::Promise (class)">Promise</a></span>&lt;Array&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


310
311
312
313
314
315
316
317
318
319
320</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/promise.rb', line 310</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_zip'>zip</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_promises'>promises</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_zero'>zero</span> <span class='op'>=</span> <span class='id identifier rubyid_fulfill'>fulfill</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>executor:</span> <span class='const'>ImmediateExecutor</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_promises'>promises</span><span class='period'>.</span><span class='id identifier rubyid_reduce'>reduce</span><span class='lparen'>(</span><span class='id identifier rubyid_zero'>zero</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_p1'>p1</span><span class='comma'>,</span> <span class='id identifier rubyid_p2'>p2</span><span class='op'>|</span>
    <span class='id identifier rubyid_p1'>p1</span><span class='period'>.</span><span class='id identifier rubyid_flat_map'>flat_map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_results'>results</span><span class='op'>|</span>
      <span class='id identifier rubyid_p2'>p2</span><span class='period'>.</span><span class='id identifier rubyid_then'>then</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_next_result'>next_result</span><span class='op'>|</span>
        <span class='id identifier rubyid_results'>results</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_next_result'>next_result</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="completed?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>completed?</strong> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Obligation.html#completed%3F-instance_method" title="Concurrent::Obligation#completed? (method)">Obligation</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="exception-instance_method">
  
    - (<tt>Object</tt>) <strong>exception</strong>(*args) 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Obligation.html#exception-instance_method" title="Concurrent::Obligation#exception (method)">Obligation</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>allows Obligation to be risen</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_rejected_ivar'>rejected_ivar</span> <span class='op'>=</span> <span class='const'>Ivar</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='period'>.</span><span class='id identifier rubyid_fail'>fail</span>
<span class='id identifier rubyid_raise'>raise</span> <span class='id identifier rubyid_rejected_ivar'>rejected_ivar</span></code></pre>
    
  </div>


</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="execute-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Concurrent::Promise (class)">Promise</a></span></tt>) <strong>execute</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Concurrent::Promise (class)">Promise</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.5.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


223
224
225
226
227
228
229
230
231
232
233</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/promise.rb', line 223</span>

<span class='kw'>def</span> <span class='id identifier rubyid_execute'>execute</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_root?'>root?</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_compare_and_set_state'>compare_and_set_state</span><span class='lparen'>(</span><span class='symbol'>:pending</span><span class='comma'>,</span> <span class='symbol'>:unscheduled</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_set_pending'>set_pending</span>
      <span class='id identifier rubyid_realize'>realize</span><span class='lparen'>(</span><span class='ivar'>@promise_body</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='ivar'>@parent</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span>
  <span class='kw'>end</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="flat_map-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Concurrent::Promise (class)">Promise</a></span></tt>) <strong>flat_map</strong>(&amp;block) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Yield the successful result to the block that returns a promise. If that
promise is also successful the result is the result of the yielded promise.
If either part fails the whole also fails.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='const'>Promise</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span> <span class='lbrace'>{</span> <span class='int'>1</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_flat_map'>flat_map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='const'>Promise</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_v'>v</span> <span class='op'>+</span> <span class='int'>2</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_value!'>value!</span> <span class='comment'>#=&gt; 3</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Concurrent::Promise (class)">Promise</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/promise.rb', line 283</span>

<span class='kw'>def</span> <span class='id identifier rubyid_flat_map'>flat_map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_child'>child</span> <span class='op'>=</span> <span class='const'>Promise</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
    <span class='label'>parent:</span> <span class='kw'>self</span><span class='comma'>,</span>
    <span class='label'>executor:</span> <span class='const'>ImmediateExecutor</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='comma'>,</span>
  <span class='rparen'>)</span>

  <span class='id identifier rubyid_on_error'>on_error</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span> <span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_on_reject'>on_reject</span><span class='lparen'>(</span><span class='id identifier rubyid_e'>e</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_on_success'>on_success</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_result1'>result1</span><span class='op'>|</span>
    <span class='kw'>begin</span>
      <span class='id identifier rubyid_inner'>inner</span> <span class='op'>=</span> <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_result1'>result1</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_inner'>inner</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span>
      <span class='id identifier rubyid_inner'>inner</span><span class='period'>.</span><span class='id identifier rubyid_on_success'>on_success</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_result2'>result2</span><span class='op'>|</span> <span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_on_fulfill'>on_fulfill</span><span class='lparen'>(</span><span class='id identifier rubyid_result2'>result2</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
      <span class='id identifier rubyid_inner'>inner</span><span class='period'>.</span><span class='id identifier rubyid_on_error'>on_error</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span> <span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_on_reject'>on_reject</span><span class='lparen'>(</span><span class='id identifier rubyid_e'>e</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='kw'>rescue</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_e'>e</span>
      <span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_on_reject'>on_reject</span><span class='lparen'>(</span><span class='id identifier rubyid_e'>e</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_child'>child</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fulfilled?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>fulfilled?</strong> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='realized?-instance_method'>realized?</span></span>
    </span>
  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Obligation.html#fulfilled%3F-instance_method" title="Concurrent::Obligation#fulfilled? (method)">Obligation</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Has the obligation been fulfilled?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="incomplete?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>incomplete?</strong> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Obligation.html#incomplete%3F-instance_method" title="Concurrent::Obligation#incomplete? (method)">Obligation</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="init_mutex-instance_method">
  
    - (<tt>Object</tt>) <strong>init_mutex</strong>  <span class="extras">(protected)</span>
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Dereferenceable.html#init_mutex-instance_method" title="Concurrent::Dereferenceable#init_mutex (method)">Dereferenceable</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'><p>This method <em>must</em> be called from within the constructor of the including class.</p>
</div>
  </div>

<p>Initializes the internal <code>Mutex</code>.</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Dereferenceable.html#mutex-instance_method" title="Concurrent::Dereferenceable#mutex (method)">#mutex</a></span></li>
    
  </ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mutex-instance_method">
  
    - (<tt>Mutex</tt>) <strong>mutex</strong>  <span class="extras">(protected)</span>
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Dereferenceable.html#mutex-instance_method" title="Concurrent::Dereferenceable#mutex (method)">Dereferenceable</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>A mutex lock used for synchronizing thread-safe operations. Methods defined
by <code>Dereferenceable</code> are synchronized using the <code>Mutex</code> returned from this
method. Operations performed by the including class that operate on the
<code>@value</code> instance variable should be locked with this <code>Mutex</code>.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Mutex</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the synchronization object</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="no_error!-instance_method">
  
    - (<tt><span class='object_link'><a href="Obligation.html" title="Concurrent::Obligation (module)">Obligation</a></span></tt>) <strong>no_error!</strong>(timeout = nil) 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Obligation.html#no_error%21-instance_method" title="Concurrent::Obligation#no_error! (method)">Obligation</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>wait until Obligation is #complete?</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>timeout</span>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the maximum time in second to wait.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Obligation.html" title="Concurrent::Obligation (module)">Obligation</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>self</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>Exception</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>when #rejected? it raises #reason</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="notify_child-instance_method">
  
    - (<tt>Object</tt>) <strong>notify_child</strong>(child)  <span class="extras">(protected)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


416
417
418
419</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/promise.rb', line 416</span>

<span class='kw'>def</span> <span class='id identifier rubyid_notify_child'>notify_child</span><span class='lparen'>(</span><span class='id identifier rubyid_child'>child</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_if_state'>if_state</span><span class='lparen'>(</span><span class='symbol'>:fulfilled</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_on_fulfill'>on_fulfill</span><span class='lparen'>(</span><span class='id identifier rubyid_apply_deref_options'>apply_deref_options</span><span class='lparen'>(</span><span class='ivar'>@value</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_if_state'>if_state</span><span class='lparen'>(</span><span class='symbol'>:rejected</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_on_reject'>on_reject</span><span class='lparen'>(</span><span class='ivar'>@reason</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="on_success-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Concurrent::Promise (class)">Promise</a></span></tt>) <strong>on_success</strong>(&amp;block) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Concurrent::Promise (class)">Promise</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


262
263
264
265</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/promise.rb', line 262</span>

<span class='kw'>def</span> <span class='id identifier rubyid_on_success'>on_success</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>no block given</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_then'>then</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pending?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>pending?</strong> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Obligation.html#pending%3F-instance_method" title="Concurrent::Obligation#pending? (method)">Obligation</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Is obligation completion still pending?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reason-instance_method">
  
    - (<tt>Object</tt>) <strong>reason</strong> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Obligation.html#reason-instance_method" title="Concurrent::Obligation#reason (method)">Obligation</a></span>
    </span>
  
</h3>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rejected?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>rejected?</strong> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Obligation.html#rejected%3F-instance_method" title="Concurrent::Obligation#rejected? (method)">Obligation</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Has the obligation been rejected?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rescue-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Concurrent::Promise (class)">Promise</a></span></tt>) <strong>rescue</strong>(&amp;block) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='catch-instance_method'>catch</span>, <span id='on_error-instance_method'>on_error</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Concurrent::Promise (class)">Promise</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


268
269
270</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/promise.rb', line 268</span>

<span class='kw'>def</span> <span class='kw'>rescue</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_then'>then</span><span class='lparen'>(</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_deref_options-instance_method">
  
    - (<tt>Object</tt>) <strong>set_deref_options</strong>(opts = {})  <span class="extras">(protected)</span>
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Dereferenceable.html#set_deref_options-instance_method" title="Concurrent::Dereferenceable#set_deref_options (method)">Dereferenceable</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'><p>Most classes that include this module will call <code>#set_deref_options</code></p>
</div>
  </div>

<p>Set the options which define the operations #value performs before
returning data to the caller (dereferencing).</p>

<p>from within the constructor, thus allowing these options to be set at
object creation.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>opts</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the options defining dereference behavior.</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <p class="tag_title">Options Hash (<tt>opts</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:dup_on_deref</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>false</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>call <code>#dup</code> before returning the data</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:freeze_on_deref</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>false</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>call <code>#freeze</code> before returning the data</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:copy_on_deref</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>call the given <code>Proc</code> passing the internal value and
returning the value returned from the proc</p>
</div>
          
        </li>
      
    </ul>
  


</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_pending-instance_method">
  
    - (<tt>Object</tt>) <strong>set_pending</strong>  <span class="extras">(protected)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


392
393
394
395
396
397</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/promise.rb', line 392</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_pending'>set_pending</span>
  <span class='id identifier rubyid_mutex'>mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='ivar'>@state</span> <span class='op'>=</span> <span class='symbol'>:pending</span>
    <span class='ivar'>@children</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_c'>c</span><span class='op'>|</span> <span class='id identifier rubyid_c'>c</span><span class='period'>.</span><span class='id identifier rubyid_set_pending'>set_pending</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_state!-instance_method">
  
    - (<tt>Object</tt>) <strong>set_state!</strong>(success, value, reason)  <span class="extras">(protected)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


435
436
437
438</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/promise.rb', line 435</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_state!'>set_state!</span><span class='lparen'>(</span><span class='id identifier rubyid_success'>success</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_reason'>reason</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_set_state'>set_state</span><span class='lparen'>(</span><span class='id identifier rubyid_success'>success</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_reason'>reason</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_event'>event</span><span class='period'>.</span><span class='id identifier rubyid_set'>set</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="state-instance_method">
  
    - (<tt>Object</tt>) <strong>state</strong> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Obligation.html#state-instance_method" title="Concurrent::Obligation#state (method)">Obligation</a></span>
    </span>
  
</h3>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="synchronized_set_state!-instance_method">
  
    - (<tt>Object</tt>) <strong>synchronized_set_state!</strong>(success, value, reason)  <span class="extras">(protected)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


440
441
442
443
444
445</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/promise.rb', line 440</span>

<span class='kw'>def</span> <span class='id identifier rubyid_synchronized_set_state!'>synchronized_set_state!</span><span class='lparen'>(</span><span class='id identifier rubyid_success'>success</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_reason'>reason</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_mutex'>mutex</span><span class='period'>.</span><span class='id identifier rubyid_lock'>lock</span>
  <span class='id identifier rubyid_set_state!'>set_state!</span><span class='lparen'>(</span><span class='id identifier rubyid_success'>success</span><span class='comma'>,</span> <span class='id identifier rubyid_value'>value</span><span class='comma'>,</span> <span class='id identifier rubyid_reason'>reason</span><span class='rparen'>)</span>
<span class='kw'>ensure</span>
  <span class='id identifier rubyid_mutex'>mutex</span><span class='period'>.</span><span class='id identifier rubyid_unlock'>unlock</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="then-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Concurrent::Promise (class)">Promise</a></span></tt>) <strong>then</strong>(rescuer = nil, &amp;block) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the new promise</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Concurrent::Promise (class)">Promise</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the new promise</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/promise.rb', line 241</span>

<span class='kw'>def</span> <span class='kw'>then</span><span class='lparen'>(</span><span class='id identifier rubyid_rescuer'>rescuer</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>rescuers and block are both missing</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_rescuer'>rescuer</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='id identifier rubyid_block'>block</span> <span class='op'>=</span> <span class='const'>Proc</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_result'>result</span><span class='op'>|</span> <span class='id identifier rubyid_result'>result</span> <span class='rbrace'>}</span> <span class='kw'>if</span> <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
  <span class='id identifier rubyid_child'>child</span> <span class='op'>=</span> <span class='const'>Promise</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
    <span class='label'>parent:</span> <span class='kw'>self</span><span class='comma'>,</span>
    <span class='label'>executor:</span> <span class='ivar'>@executor</span><span class='comma'>,</span>
    <span class='label'>on_fulfill:</span> <span class='id identifier rubyid_block'>block</span><span class='comma'>,</span>
    <span class='label'>on_reject:</span> <span class='id identifier rubyid_rescuer'>rescuer</span>
  <span class='rparen'>)</span>

  <span class='id identifier rubyid_mutex'>mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_state'>state</span> <span class='op'>=</span> <span class='symbol'>:pending</span> <span class='kw'>if</span> <span class='ivar'>@state</span> <span class='op'>==</span> <span class='symbol'>:pending</span>
    <span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_on_fulfill'>on_fulfill</span><span class='lparen'>(</span><span class='id identifier rubyid_apply_deref_options'>apply_deref_options</span><span class='lparen'>(</span><span class='ivar'>@value</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@state</span> <span class='op'>==</span> <span class='symbol'>:fulfilled</span>
    <span class='id identifier rubyid_child'>child</span><span class='period'>.</span><span class='id identifier rubyid_on_reject'>on_reject</span><span class='lparen'>(</span><span class='ivar'>@reason</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@state</span> <span class='op'>==</span> <span class='symbol'>:rejected</span>
    <span class='ivar'>@children</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_child'>child</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_child'>child</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unscheduled?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>unscheduled?</strong> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Obligation.html#unscheduled%3F-instance_method" title="Concurrent::Obligation#unscheduled? (method)">Obligation</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Is the obligation still unscheduled?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="value-instance_method">
  
    - (<tt>Object</tt>) <strong>value</strong>(timeout = nil) 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Obligation.html#value-instance_method" title="Concurrent::Obligation#value (method)">Obligation</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns see Dereferenceable#deref</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>see Dereferenceable#deref</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="value!-instance_method">
  
    - (<tt>Object</tt>) <strong>value!</strong>(timeout = nil) 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Obligation.html#value%21-instance_method" title="Concurrent::Obligation#value! (method)">Obligation</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns see Dereferenceable#deref</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>see Dereferenceable#deref</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>Exception</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>when #rejected? it raises #reason</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="value=-instance_method">
  
    - (<tt>Object</tt>) <strong>value=</strong>(val)  <span class="extras">(protected)</span>
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Dereferenceable.html#value%3D-instance_method" title="Concurrent::Dereferenceable#value= (method)">Dereferenceable</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Set the internal value of this object</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>val</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the new value</p>
</div>
      
    </li>
  
</ul>


</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="wait-instance_method">
  
    - (<tt><span class='object_link'><a href="Obligation.html" title="Concurrent::Obligation (module)">Obligation</a></span></tt>) <strong>wait</strong>(timeout = nil) 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Obligation.html#wait-instance_method" title="Concurrent::Obligation#wait (method)">Obligation</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>wait until Obligation is #complete?</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>timeout</span>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the maximum time in second to wait.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Obligation.html" title="Concurrent::Obligation (module)">Obligation</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>self</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="zip-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Concurrent::Promise (class)">Promise</a></span>&lt;Array&gt;</tt>) <strong>zip</strong>(*others) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Builds a promise that produces the result of self and others in an Array
and fails if any of them fails.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>others</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="" title="Concurrent::Promise (class)">Promise</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Concurrent::Promise (class)">Promise</a></span>&lt;Array&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


328
329
330</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/promise.rb', line 328</span>

<span class='kw'>def</span> <span class='id identifier rubyid_zip'>zip</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_others'>others</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_zip'>zip</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_others'>others</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Tue Dec 23 10:20:20 2014 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.1.2).
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-57940973-1', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>