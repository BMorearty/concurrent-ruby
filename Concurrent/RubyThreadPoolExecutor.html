<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Concurrent::RubyThreadPoolExecutor
  
    &mdash; Concurrent
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!Concurrent/RubyThreadPoolExecutor.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (R)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span>
     &raquo; 
    <span class="title">RubyThreadPoolExecutor</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Concurrent::RubyThreadPoolExecutor
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Concurrent::RubyThreadPoolExecutor</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="RubyExecutor.html" title="Concurrent::RubyExecutor (module)">RubyExecutor</a></span></dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/concurrent/executor/ruby_thread_pool_executor.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'><p>When running on the JVM (JRuby) this class will inherit from <code>JavaThreadPoolExecutor</code>.
On all other platforms it will inherit from <code>RubyThreadPoolExecutor</code>.</p>
</div>
  </div>

<p>An abstraction composed of one or more threads and a task queue. Tasks
(blocks or <code>proc</code> objects) are submit to the pool and added to the queue.
The threads in the pool remove the tasks and execute them in the order
they were received. When there are more tasks queued than there are
threads to execute them the pool will create new threads, up to the
configured maximum. Similarly, threads that are idle for too long will
be garbage collected, down to the configured minimum options. Should a
thread crash it, too, will be garbage collected.</p>

<p><code>ThreadPoolExecutor</code> is based on the Java class of the same name. From
the official Java documentationa;</p>

<blockquote>
<p>Thread pools address two different problems: they usually provide
improved performance when executing large numbers of asynchronous tasks,
due to reduced per-task invocation overhead, and they provide a means
of bounding and managing the resources, including threads, consumed
when executing a collection of tasks. Each ThreadPoolExecutor also
maintains some basic statistics, such as the number of completed tasks.</p>

<p>To be useful across a wide range of contexts, this class provides many
adjustable parameters and extensibility hooks. However, programmers are
urged to use the more convenient Executors factory methods
<a href="unbounded%20thread%20pool,%20with%20automatic%20thread%20reclamation">CachedThreadPool</a>,
<a href="fixed%20size%20thread%20pool">FixedThreadPool</a> and <a href="single%0Abackground%20thread">SingleThreadExecutor</a>, that preconfigure settings for the most common usage
scenarios.</p>
</blockquote>

<p>Thread pools support several configuration options:</p>

<ul>
<li><code>max_threads</code>: The maximum number of threads that may be created in the pool.</li>
<li><code>min_threads</code>: The minimum number of threads that may be retained in the pool.</li>
<li><code>idletime</code>: The number of seconds that a thread may be idle before being reclaimed.</li>
<li><code>max_queue</code>: The maximum number of tasks that may be waiting in the work queue at
any one time. When the queue size reaches <code>max_queue</code> subsequent tasks will be
rejected in accordance with the configured <code>overflow_policy</code>.</li>
<li><code>overflow_policy</code>: The policy defining how rejected tasks are handled.    #</li>
</ul>

<p>Three overflow policies are supported:</p>

<ul>
<li><code>:abort</code>: Raise a <code>RejectedExecutionError</code> exception and discard the task.</li>
<li><code>:discard</code>: Silently discard the task and return <code>nil</code> as the task result.</li>
<li><code>:caller_runs</code>: Execute the task on the calling thread.</li>
</ul>

<p><h1>Thread Pools</h1>

<p>A Thread Pool is an abstraction that you can give a unit of work to, and the work will be executed by one of possibly several threads in the pool. One motivation for using thread pools is the overhead of creating and destroying threads. Creating a pool of reusable worker threads then repeatedly re-using threads from the pool can have huge performace benefits for a long-running application like a service.</p>

<p><code>concurrent-ruby</code> also offers some higher level abstractions than thread pools. For many problems, you will be better served by using one of these -- if you are thinking of using a thread pool, we especially recommend you look at and understand <a href="http://ruby-concurrency.github.io/concurrent-ruby/Concurrent/Future.html">Future</a>s before deciding to use thread pools directly instead.  Futures are implemented using thread pools, but offer a higher level abstraction.</p>

<p>But there are some problems for which directly using a thread pool is an appropriate solution. Or, you may wish to make your own thread pool to run Futures on, to be separate or have different characteristics than the global thread pool that Futures run on by default.</p>

<p>Thread pools are considered &#39;executors&#39; -- an object you can give a unit of work to, to have it exeucted.  In fact, thread pools are the main kind of executor you will see, others are mainly for testing or odd edge cases. In some documentation or source code you&#39;ll see reference to an &#39;executor&#39; -- this is commonly a thread pool, or else something similar that executes units of work (usually supplied as ruby blocks).</p>

<h2>FixedThreadPool</h2>

<p>A <a href="http://ruby-concurrency.github.io/concurrent-ruby/Concurrent/FixedThreadPool.html">FixedThreadPool</a> contains a fixed number of threads. When you give a unit if work to it, an available thread will be used to execute.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pool'>pool</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>FixedThreadPool</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='int'>5</span><span class='rparen'>)</span> <span class='comment'># 5 threads
</span><span class='id identifier rubyid_pool'>pool</span><span class='period'>.</span><span class='id identifier rubyid_post'>post</span> <span class='kw'>do</span>
   <span class='comment'># some parallel work
</span><span class='kw'>end</span>
<span class='comment'># As with all thread pools, execution resumes immediately here in the caller thread,
</span><span class='comment'># while work is concurrently being done in the thread pool, at some possibly future point.
</span></code></pre>

<p>What happens if you post new work when all (eg) 5 threads are currently busy? It will be added to a queue, and executed when a thread becomes available.  In a <code>FixedThreadPool</code>, if you post work to the pool much faster than the work can be completed, the queue may grow without bounds, as the work piles up in the holding queue, using up memory without bounds.  To limit the queue and apply some form of &#39;back pressure&#39; instead, you can use the more configurable <code>ThreadPoolExecutor</code> (See below).</p>

<p>If you&#39;d like to base the number of threads in the pool on the number of processors available, your code can consult <a href="http://ruby-concurrency.github.io/concurrent-ruby/Concurrent/ProcessorCounter.html#processor_count-instance_method">Concurrent.processor_count</a>.</p>

<p>The <code>FixedThreadPool</code> is based on the semantics used in Java for <a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html#newFixedThreadPool(int)">java.util.concurrent.Executors.newFixedThreadPool(int nThreads)</a></p>

<h2>CachedThreadPool</h2>

<p>A <a href="http://ruby-concurrency.github.io/concurrent-ruby/Concurrent/CachedThreadPool.html">CachedThreadPool</a> will create as many threads as neccesary for work posted to it. If you post work to a <code>CachedThreadPool</code> when all it&#39;s existing threads are busy, it will create a new thread to execute that work, and then keep that thread cached for future work. Cached threads are reclaimed (destroyed) after they are idle for a while.</p>

<p>CachedThreadPools typically improve the performance of programs that execute many short-lived asynchronous tasks.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pool'>pool</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>CachedThreadPool</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='id identifier rubyid_pool'>pool</span><span class='period'>.</span><span class='id identifier rubyid_post'>post</span> <span class='kw'>do</span>
  <span class='comment'># some parallel work
</span><span class='kw'>end</span>
</code></pre>

<p>The behavior of <code>CachedThreadPool</code> is based on Java&#39;s <a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html#newCachedThreadPool()">java.util.concurrent.Executors.newCachedThreadPool()</a></p>

<p>If you&#39;d like to configure a maximum number of threads, you can use the more general configurable <code>ThreadPoolExecutor</code>.</p>

<h2>ThreadPoolExecutor</h2>

<p>A <a href="http://ruby-concurrency.github.io/concurrent-ruby/Concurrent/ThreadPoolExecutor.html">ThreadPoolExecutor</a> is a general-purpose thread pool that can be configured to have various behaviors.</p>

<p>The <code>CachedThreadPool</code> and <code>FixedThreadPool</code> are simply <code>ThreadPoolExecutor</code>s with certain configuration pre-determined. For instance, to create a <code>ThreadPoolExecutor</code> that works just like a <code>FixedThreadPool.new 5</code>, you could:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pool'>pool</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>ThreadPoolExecutor</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
   <span class='label'>min_threads:</span> <span class='int'>5</span><span class='comma'>,</span>
   <span class='label'>max_threads:</span> <span class='int'>5</span><span class='comma'>,</span>
   <span class='label'>max_queue:</span> <span class='int'>0</span> <span class='comment'># unbounded work queue
</span><span class='rparen'>)</span>
</code></pre>

<p>If you want to provide a maximum queue size, you may also consider the <code>overflow_policy</code> -- what will happen if work is posted to a pool when the queue of waiting work has reached the maximum size? Available policies:</p>

<ul>
<li>abort: Raise a <code>Concurrent::RejectedExecutionError</code> exception and discard the task. (default policy)</li>
<li>discard: Silently discard the task and return nil as the task result.</li>
<li>caller_runs: The work will be executed in the thread of the caller, instead of being given to another thread in the pool</li>
</ul>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pool'>pool</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>ThreadPoolExecutor</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
   <span class='label'>min_threads:</span> <span class='int'>5</span><span class='comma'>,</span>
   <span class='label'>max_threads:</span> <span class='int'>5</span><span class='comma'>,</span>
   <span class='label'>max_queue:</span> <span class='int'>100</span><span class='comma'>,</span>
   <span class='label'>overflow_policy:</span> <span class='symbol'>:caller_runs</span>
<span class='rparen'>)</span>
</code></pre>

<p>Similarly, you can create something similar to a <code>CachedThreadPool</code>, but with a maximum number of threads. With an unbounded queue:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pool'>pool</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>ThreadPoolExecutor</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
   <span class='label'>min_threads:</span> <span class='int'>3</span><span class='comma'>,</span> <span class='comment'># create 3 threads at startup
</span>   <span class='label'>max_threads:</span> <span class='int'>10</span><span class='comma'>,</span> <span class='comment'># create at most 10 threads
</span>   <span class='label'>max_queue:</span> <span class='int'>0</span><span class='comma'>,</span> <span class='comment'># unbounded queue of work waiting for an available thread
</span><span class='rparen'>)</span>
</code></pre>

<p>Or, with a variable number of threads like a CachedThreadPool, but with a bounded queue and an overflow_policy:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pool'>pool</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>ThreadPoolExecutor</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
   <span class='label'>min_threads:</span> <span class='int'>3</span><span class='comma'>,</span> <span class='comment'># create 3 threads at startup
</span>   <span class='label'>max_threads:</span> <span class='int'>10</span><span class='comma'>,</span> <span class='comment'># create at most 10 threads
</span>   <span class='label'>max_queue:</span> <span class='int'>100</span><span class='comma'>,</span> <span class='comment'># at most 100 jobs waiting in the queue,
</span>   <span class='label'>overflow_policy:</span> <span class='symbol'>:abort</span>
<span class='rparen'>)</span>
</code></pre>

<p>ThreadPoolExecutors with <code>min_threads</code> and <code>max_threads</code> set to different values will ordinarily reclaim idle threads.  You can supply an <code>idletime</code> argument, number of seconds that a thread may be idle before being reclaimed. The default is 60 seconds.</p>

<p><code>concurrent-ruby</code> thread pools are based on designs from <code>java.util.concurrent</code> --  a well-designed, stable, scalable, and battle-tested concurrency library. The <code>ThreadPoolExecutor</code> is based on Java <a href="https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html">java.util.concurrent.ThreadPoolExecutor</a>, and is in fact implemented with a Java ThreadPoolExecutor when running under JRuby. For more information on the design and concepts, you may find the Java documentation helpful:</p>

<ul>
<li><a href="http://docs.oracle.com/javase/tutorial/essential/concurrency/pools.html">http://docs.oracle.com/javase/tutorial/essential/concurrency/pools.html</a></li>
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html">http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html</a></li>
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html">http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html</a></li>
</ul>

<h2>Thread Pool Status and Shutdown</h2>

<p>A running thread pool can be shutdown in an orderly or disruptive manner. Once a thread pool has been shutdown it cannot be started again.</p>

<p>The <code>shutdown</code> method can be used to initiate an orderly shutdown of the thread pool. All new post calls will reject the given block and immediately return false. Threads in the pool will continue to process all in-progress work and will process all tasks still in the queue.</p>

<p>The <code>kill</code> method can be used to immediately shutdown the pool. All new post calls will reject the given block and immediately return false. Ruby&#39;s Thread.kill will be called on all threads in the pool, aborting all in-progress work. Tasks in the queue will be discarded.</p>

<p>The method <code>wait_for_termination</code> can be used to block and wait for pool shutdown to complete. This is useful when shutting down an application and ensuring the app doesn&#39;t exit before pool processing is complete. The method wait_for_termination will block for a maximum of the given number of seconds then return true if shutdown completed successfully or false. When the timeout value is nil the call will block indefinitely. Calling wait_for_termination on a stopped thread pool will immediately return true.</p>

<pre class="code ruby"><code class="ruby"><span class='comment'># tell the pool to shutdown in an orderly fashion, allowing in progress work to complete
</span><span class='id identifier rubyid_pool'>pool</span><span class='period'>.</span><span class='id identifier rubyid_shutdown'>shutdown</span>
<span class='comment'># now wait for all work to complete, wait as long as it takes
</span><span class='id identifier rubyid_pool'>pool</span><span class='period'>.</span><span class='id identifier rubyid_wait_for_termination'>wait_for_termination</span>
</code></pre>

<p>You can check for current pool status:</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pool'>pool</span><span class='period'>.</span><span class='id identifier rubyid_running?'>running?</span>
<span class='id identifier rubyid_pool'>pool</span><span class='period'>.</span><span class='id identifier rubyid_shuttingdown?'>shuttingdown?</span> <span class='comment'># in process of shutting down, can&#39;t take any more work
</span><span class='id identifier rubyid_pool'>pool</span><span class='period'>.</span><span class='id identifier rubyid_shutdown?'>shutdown?</span> <span class='comment'># it&#39;s done
</span></code></pre>

<p>The <code>shutdown?</code> method will return true for a stopped pool, regardless of whether the pool was stopped with <code>shutdown</code> or <code>kill</code>.</p>

<h2>Other Executors</h2>

<p>There are several other thread pools and executors in the <code>concurrent-ruby</code> library. See the API documentation for more information:</p>

<ul>
<li><a href="http://ruby-concurrency.github.io/concurrent-ruby/Concurrent/CachedThreadPool.html">CachedThreadPool</a></li>
<li><a href="http://ruby-concurrency.github.io/concurrent-ruby/Concurrent/FixedThreadPool.html">FixedThreadPool</a></li>
<li><a href="http://ruby-concurrency.github.io/concurrent-ruby/Concurrent/ImmediateExecutor.html">ImmediateExecutor</a></li>
<li><a href="http://ruby-concurrency.github.io/concurrent-ruby/Concurrent/PerThreadExecutor.html">PerThreadExecutor</a></li>
<li><a href="http://ruby-concurrency.github.io/concurrent-ruby/Concurrent/SafeTaskExecutor.html">SafeTaskExecutor</a></li>
<li><a href="http://ruby-concurrency.github.io/concurrent-ruby/Concurrent/SerializedExecution.html">SerializedExecution</a></li>
<li><a href="http://ruby-concurrency.github.io/concurrent-ruby/Concurrent/SerializedExecutionDelegator.html">SerializedExecutionDelegator</a></li>
<li><a href="http://ruby-concurrency.github.io/concurrent-ruby/Concurrent/SingleThreadExecutor.html">SingleThreadExecutor</a></li>
<li><a href="http://ruby-concurrency.github.io/concurrent-ruby/Concurrent/ThreadPoolExecutor.html">ThreadPoolExecutor</a></li>
<li><a href="http://ruby-concurrency.github.io/concurrent-ruby/Concurrent/TimerSet.html">TimerSet</a></li>
</ul>

<h2>Global Thread Pools</h2>

<p>Concurrent Ruby provides several global thread pools. Higher-level abstractions use global thread pools, by default, for running asynchronous operations without creating new threads more often than necessary. These executors are lazy-loaded so they do not create overhead when not needed. The global executors may also be accessed directly if desired. For more information regarding the global thread pools and their configuration, refer to the <a href="http://ruby-concurrency.github.io/concurrent-ruby/Concurrent/Configuration.html">API documentation</a>.</p>

<p>When using a higher-level abstraction, which ordinarily uses a global thread pool, you may wish to instead supply your own thread pool, for separation of work, or to control the thread pool behavior with configuration.</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_pool'>pool</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>ThreadPoolExecutor</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
  <span class='symbol'>:min_threads</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>2</span><span class='comma'>,</span> <span class='const'>Concurrent</span><span class='period'>.</span><span class='id identifier rubyid_processor_count'>processor_count</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span><span class='comma'>,</span>
  <span class='symbol'>:max_threads</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>2</span><span class='comma'>,</span> <span class='const'>Concurrent</span><span class='period'>.</span><span class='id identifier rubyid_processor_count'>processor_count</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span><span class='comma'>,</span>
  <span class='symbol'>:max_queue</span>   <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>2</span><span class='comma'>,</span> <span class='const'>Concurrent</span><span class='period'>.</span><span class='id identifier rubyid_processor_count'>processor_count</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span> <span class='op'>*</span> <span class='int'>5</span><span class='comma'>,</span>
  <span class='symbol'>:overflow_policy</span> <span class='op'>=&gt;</span> <span class='symbol'>:caller_runs</span>
<span class='rparen'>)</span>

<span class='id identifier rubyid_future'>future</span> <span class='op'>=</span> <span class='const'>Future</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='symbol'>:executor</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_pool'>pool</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span> <span class='kw'>do</span>
   <span class='comment'>#work
</span><span class='kw'>end</span>
</code></pre>
</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="" title="Concurrent::RubyThreadPoolExecutor (class)">RubyThreadPoolExecutor</a></span></li>
    
      <li><span class='object_link'><a href="JavaThreadPoolExecutor.html" title="Concurrent::JavaThreadPoolExecutor (class)">JavaThreadPoolExecutor</a></span></li>
    
      <li><a href="http://docs.oracle.com/javase/tutorial/essential/concurrency/pools.html" target="_parent" title="http://docs.oracle.com/javase/tutorial/essential/concurrency/pools.html">http://docs.oracle.com/javase/tutorial/essential/concurrency/pools.html</a></li>
    
      <li><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html" target="_parent" title="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html">http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html</a></li>
    
      <li><a href="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html" target="_parent" title="http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html">http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ExecutorService.html</a></li>
    
  </ul>

</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="RubyCachedThreadPool.html" title="Concurrent::RubyCachedThreadPool (class)">RubyCachedThreadPool</a></span>, <span class='object_link'><a href="RubyFixedThreadPool.html" title="Concurrent::RubyFixedThreadPool (class)">RubyFixedThreadPool</a></span>, <span class='object_link'><a href="ThreadPoolExecutor.html" title="Concurrent::ThreadPoolExecutor (class)">ThreadPoolExecutor</a></span></p>
</div>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="DEFAULT_MAX_POOL_SIZE-constant" class="">DEFAULT_MAX_POOL_SIZE =
          <div class="docstring">
  <div class="discussion">
    <p>Default maximum number of threads that will be created in the pool.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>2</span><span class='op'>**</span><span class='int'>15</span></pre></dd>
      
        <dt id="DEFAULT_MIN_POOL_SIZE-constant" class="">DEFAULT_MIN_POOL_SIZE =
          <div class="docstring">
  <div class="discussion">
    <p>Default minimum number of threads that will be retained in the pool.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>0</span></pre></dd>
      
        <dt id="DEFAULT_MAX_QUEUE_SIZE-constant" class="">DEFAULT_MAX_QUEUE_SIZE =
          <div class="docstring">
  <div class="discussion">
    <p>Default maximum number of tasks that may be added to the task queue.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>0</span></pre></dd>
      
        <dt id="DEFAULT_THREAD_IDLETIMEOUT-constant" class="">DEFAULT_THREAD_IDLETIMEOUT =
          <div class="docstring">
  <div class="discussion">
    <p>Default maximum number of seconds a thread in the pool may remain idle
before being reclaimed.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>60</span></pre></dd>
      
        <dt id="OVERFLOW_POLICIES-constant" class="">OVERFLOW_POLICIES =
          <div class="docstring">
  <div class="discussion">
    <p>The set of possible overflow policies that may be set at thread pool creation.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span><span class='symbol'>:abort</span><span class='comma'>,</span> <span class='symbol'>:discard</span><span class='comma'>,</span> <span class='symbol'>:caller_runs</span><span class='rbracket'>]</span></pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#completed_task_count-instance_method" title="#completed_task_count (instance method)">- (Object) <strong>completed_task_count</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The number of tasks that have been completed by the pool since construction.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#idletime-instance_method" title="#idletime (instance method)">- (Object) <strong>idletime</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The number of seconds that a thread may be idle before being reclaimed.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#largest_length-instance_method" title="#largest_length (instance method)">- (Object) <strong>largest_length</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The largest number of threads that have been created in the pool since construction.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#max_length-instance_method" title="#max_length (instance method)">- (Object) <strong>max_length</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The maximum number of threads that may be created in the pool.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#max_queue-instance_method" title="#max_queue (instance method)">- (Object) <strong>max_queue</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The maximum number of tasks that may be waiting in the work queue at any one time.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#min_length-instance_method" title="#min_length (instance method)">- (Object) <strong>min_length</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The minimum number of threads that may be retained in the pool.</p>
</div></span>
  
</li>

    
      <li class="protected ">
  <span class="summary_signature">
    
      <a href="#mutex-instance_method" title="#mutex (instance method)">- (Object) <strong>mutex</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="RubyExecutor.html#mutex-instance_method" title="Concurrent::RubyExecutor#mutex (method)">RubyExecutor</a></span>
    </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute mutex.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#overflow_policy-instance_method" title="#overflow_policy (instance method)">- (Object) <strong>overflow_policy</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The policy defining how rejected tasks (tasks received once the queue size reaches the configured <code>max_queue</code>) are handled.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#scheduled_task_count-instance_method" title="#scheduled_task_count (instance method)">- (Object) <strong>scheduled_task_count</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The number of tasks that have been scheduled for execution on the pool since construction.</p>
</div></span>
  
</li>

    
      <li class="protected ">
  <span class="summary_signature">
    
      <a href="#stop_event-instance_method" title="#stop_event (instance method)">- (Object) <strong>stop_event</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="RubyExecutor.html#stop_event-instance_method" title="Concurrent::RubyExecutor#stop_event (method)">RubyExecutor</a></span>
    </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute stop_event.</p>
</div></span>
  
</li>

    
      <li class="protected ">
  <span class="summary_signature">
    
      <a href="#stopped_event-instance_method" title="#stopped_event (instance method)">- (Object) <strong>stopped_event</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="RubyExecutor.html#stopped_event-instance_method" title="Concurrent::RubyExecutor#stopped_event (method)">RubyExecutor</a></span>
    </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute stopped_event.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%3C%3C-instance_method" title="#&lt;&lt; (instance method)">- (self) <strong>&lt;&lt;</strong>(task) </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="RubyExecutor.html#%3C%3C-instance_method" title="Concurrent::RubyExecutor#&lt;&lt; (method)">RubyExecutor</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Submit a task to the executor for asynchronous processing.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#can_overflow%3F-instance_method" title="#can_overflow? (instance method)">- (Boolean) <strong>can_overflow?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Does the task queue have a maximum size?.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#init_executor-instance_method" title="#init_executor (instance method)">- (Object) <strong>init_executor</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="RubyExecutor.html#init_executor-instance_method" title="Concurrent::RubyExecutor#init_executor (method)">RubyExecutor</a></span>
    </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Initialize the executor by creating and initializing all the internal synchronization objects.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (RubyThreadPoolExecutor) <strong>initialize</strong>(opts = {}) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Create a new thread pool.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#kill-instance_method" title="#kill (instance method)">- (Object) <strong>kill</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="RubyExecutor.html#kill-instance_method" title="Concurrent::RubyExecutor#kill (method)">RubyExecutor</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Begin an immediate shutdown.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#length-instance_method" title="#length (instance method)">- (Integer) <strong>length</strong> </a>
    

    
      (also: #current_length)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The number of threads currently in the pool.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#log-instance_method" title="#log (instance method)">- (Object) <strong>log</strong>(level, progname, message = nil, &amp;block) </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Logging.html#log-instance_method" title="Concurrent::Logging#log (method)">Logging</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Logs through <span class='object_link'><a href="Configuration.html#logger-instance_method" title="Concurrent::Configuration#logger (method)">Configuration#logger</a></span>, it can be overridden by setting @logger.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#post-instance_method" title="#post (instance method)">- (Boolean) <strong>post</strong>(*args) { ... }</a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="RubyExecutor.html#post-instance_method" title="Concurrent::RubyExecutor#post (method)">RubyExecutor</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Submit a task to the executor for asynchronous processing.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#queue_length-instance_method" title="#queue_length (instance method)">- (Integer) <strong>queue_length</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The number of tasks in the queue awaiting execution.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remaining_capacity-instance_method" title="#remaining_capacity (instance method)">- (Integer) <strong>remaining_capacity</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Number of tasks that may be enqueued before reaching <code>max_queue</code> and rejecting new tasks.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#running%3F-instance_method" title="#running? (instance method)">- (Boolean) <strong>running?</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="RubyExecutor.html#running%3F-instance_method" title="Concurrent::RubyExecutor#running? (method)">RubyExecutor</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Is the executor running?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#serialized%3F-instance_method" title="#serialized? (instance method)">- (Boolean) <strong>serialized?</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Executor.html#serialized%3F-instance_method" title="Concurrent::Executor#serialized? (method)">Executor</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Does this executor guarantee serialization of its operations?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#shutdown-instance_method" title="#shutdown (instance method)">- (Object) <strong>shutdown</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="RubyExecutor.html#shutdown-instance_method" title="Concurrent::RubyExecutor#shutdown (method)">RubyExecutor</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Begin an orderly shutdown.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#shutdown%3F-instance_method" title="#shutdown? (instance method)">- (Boolean) <strong>shutdown?</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="RubyExecutor.html#shutdown%3F-instance_method" title="Concurrent::RubyExecutor#shutdown? (method)">RubyExecutor</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Is the executor shutdown?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#shuttingdown%3F-instance_method" title="#shuttingdown? (instance method)">- (Boolean) <strong>shuttingdown?</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="RubyExecutor.html#shuttingdown%3F-instance_method" title="Concurrent::RubyExecutor#shuttingdown? (method)">RubyExecutor</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Is the executor shuttingdown?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#status-instance_method" title="#status (instance method)">- (Object) <strong>status</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns an array with the status of each thread in the pool.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#wait_for_termination-instance_method" title="#wait_for_termination (instance method)">- (Boolean) <strong>wait_for_termination</strong>(timeout = nil) </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="RubyExecutor.html#wait_for_termination-instance_method" title="Concurrent::RubyExecutor#wait_for_termination (method)">RubyExecutor</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Block until executor shutdown is complete or until <code>timeout</code> seconds have passed.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Concurrent::RubyThreadPoolExecutor (class)">RubyThreadPoolExecutor</a></span></tt>) <strong>initialize</strong>(opts = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Create a new thread pool.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>opts</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the options which configure the thread pool</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <p class="tag_title">Options Hash (<tt>opts</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:max_threads</span>
          <span class="type">(<tt>Integer</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>DEFAULT_MAX_POOL_SIZE</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>the maximum
number of threads to be created</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:min_threads</span>
          <span class="type">(<tt>Integer</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>DEFAULT_MIN_POOL_SIZE</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>the minimum
number of threads to be retained</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:idletime</span>
          <span class="type">(<tt>Integer</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>DEFAULT_THREAD_IDLETIMEOUT</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>the maximum
number of seconds a thread may be idle before being reclaimed</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:max_queue</span>
          <span class="type">(<tt>Integer</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>DEFAULT_MAX_QUEUE_SIZE</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>the maximum
number of tasks allowed in the work queue at any one time; a value of
zero means the queue may grow without bounnd</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:overflow_policy</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>:abort</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>the policy for handling new
tasks that are received when the queue size has reached <code>max_queue</code></p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if <code>:max_threads</code> is less than one</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if <code>:min_threads</code> is less than zero</p>
</div>
      
    </li>
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if <code>:overflow_policy</code> is not one of the values specified
in <code>OVERFLOW_POLICIES</code></p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html" target="_parent" title="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html">http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/executor/ruby_thread_pool_executor.rb', line 79</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@min_length</span>      <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:min_threads</span><span class='comma'>,</span> <span class='const'>DEFAULT_MIN_POOL_SIZE</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='ivar'>@max_length</span>      <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:max_threads</span><span class='comma'>,</span> <span class='const'>DEFAULT_MAX_POOL_SIZE</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='ivar'>@idletime</span>        <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:idletime</span><span class='comma'>,</span> <span class='const'>DEFAULT_THREAD_IDLETIMEOUT</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='ivar'>@max_queue</span>       <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:max_queue</span><span class='comma'>,</span> <span class='const'>DEFAULT_MAX_QUEUE_SIZE</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='ivar'>@overflow_policy</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:overflow_policy</span><span class='comma'>,</span> <span class='symbol'>:abort</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>max_threads must be greater than zero</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@max_length</span> <span class='op'>&lt;=</span> <span class='int'>0</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>min_threads cannot be less than zero</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@min_length</span> <span class='op'>&lt;</span> <span class='int'>0</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_overflow_policy'>overflow_policy</span><span class='embexpr_end'>}</span><span class='tstring_content'> is not a valid overflow policy</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='const'>OVERFLOW_POLICIES</span><span class='period'>.</span><span class='id identifier rubyid_include?'>include?</span><span class='lparen'>(</span><span class='ivar'>@overflow_policy</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>min_threads cannot be more than max_threads</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_min_length'>min_length</span> <span class='op'>&gt;</span> <span class='id identifier rubyid_max_length'>max_length</span>

  <span class='id identifier rubyid_init_executor'>init_executor</span>

  <span class='ivar'>@pool</span>                 <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@queue</span>                <span class='op'>=</span> <span class='const'>Queue</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='ivar'>@scheduled_task_count</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@completed_task_count</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@largest_length</span>       <span class='op'>=</span> <span class='int'>0</span>

  <span class='ivar'>@gc_interval</span>  <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='period'>.</span><span class='id identifier rubyid_fetch'>fetch</span><span class='lparen'>(</span><span class='symbol'>:gc_interval</span><span class='comma'>,</span> <span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span> <span class='comment'># undocumented
</span>  <span class='ivar'>@last_gc_time</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span> <span class='op'>-</span> <span class='lbracket'>[</span><span class='float'>1.0</span><span class='comma'>,</span> <span class='lparen'>(</span><span class='ivar'>@gc_interval</span> <span class='op'>*</span> <span class='float'>2.0</span><span class='rparen'>)</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="completed_task_count-instance_method">
  
    - (<tt>Object</tt>) <strong>completed_task_count</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The number of tasks that have been completed by the pool since construction.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


42
43
44</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/executor/ruby_thread_pool_executor.rb', line 42</span>

<span class='kw'>def</span> <span class='id identifier rubyid_completed_task_count'>completed_task_count</span>
  <span class='ivar'>@completed_task_count</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="idletime-instance_method">
  
    - (<tt>Object</tt>) <strong>idletime</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The number of seconds that a thread may be idle before being reclaimed.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


45
46
47</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/executor/ruby_thread_pool_executor.rb', line 45</span>

<span class='kw'>def</span> <span class='id identifier rubyid_idletime'>idletime</span>
  <span class='ivar'>@idletime</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="largest_length-instance_method">
  
    - (<tt>Object</tt>) <strong>largest_length</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The largest number of threads that have been created in the pool since construction.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/executor/ruby_thread_pool_executor.rb', line 36</span>

<span class='kw'>def</span> <span class='id identifier rubyid_largest_length'>largest_length</span>
  <span class='ivar'>@largest_length</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="max_length-instance_method">
  
    - (<tt>Object</tt>) <strong>max_length</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The maximum number of threads that may be created in the pool.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


30
31
32</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/executor/ruby_thread_pool_executor.rb', line 30</span>

<span class='kw'>def</span> <span class='id identifier rubyid_max_length'>max_length</span>
  <span class='ivar'>@max_length</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="max_queue-instance_method">
  
    - (<tt>Object</tt>) <strong>max_queue</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The maximum number of tasks that may be waiting in the work queue at any one time.
When the queue size reaches <code>max_queue</code> subsequent tasks will be rejected in
accordance with the configured <code>overflow_policy</code>.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


50
51
52</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/executor/ruby_thread_pool_executor.rb', line 50</span>

<span class='kw'>def</span> <span class='id identifier rubyid_max_queue'>max_queue</span>
  <span class='ivar'>@max_queue</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="min_length-instance_method">
  
    - (<tt>Object</tt>) <strong>min_length</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The minimum number of threads that may be retained in the pool.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


33
34
35</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/executor/ruby_thread_pool_executor.rb', line 33</span>

<span class='kw'>def</span> <span class='id identifier rubyid_min_length'>min_length</span>
  <span class='ivar'>@min_length</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="mutex-instance_method">
  
    - (<tt>Object</tt>) <strong>mutex</strong>  <span class="extras">(readonly, protected)</span>
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="RubyExecutor.html#mutex-instance_method" title="Concurrent::RubyExecutor#mutex (method)">RubyExecutor</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute mutex</p>


  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="overflow_policy-instance_method">
  
    - (<tt>Object</tt>) <strong>overflow_policy</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The policy defining how rejected tasks (tasks received once the queue size reaches
the configured <code>max_queue</code>) are handled. Must be one of the values specified in
<code>OVERFLOW_POLICIES</code>.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


55
56
57</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/executor/ruby_thread_pool_executor.rb', line 55</span>

<span class='kw'>def</span> <span class='id identifier rubyid_overflow_policy'>overflow_policy</span>
  <span class='ivar'>@overflow_policy</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="scheduled_task_count-instance_method">
  
    - (<tt>Object</tt>) <strong>scheduled_task_count</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The number of tasks that have been scheduled for execution on the pool since construction.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


39
40
41</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/executor/ruby_thread_pool_executor.rb', line 39</span>

<span class='kw'>def</span> <span class='id identifier rubyid_scheduled_task_count'>scheduled_task_count</span>
  <span class='ivar'>@scheduled_task_count</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="stop_event-instance_method">
  
    - (<tt>Object</tt>) <strong>stop_event</strong>  <span class="extras">(readonly, protected)</span>
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="RubyExecutor.html#stop_event-instance_method" title="Concurrent::RubyExecutor#stop_event (method)">RubyExecutor</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute stop_event</p>


  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="stopped_event-instance_method">
  
    - (<tt>Object</tt>) <strong>stopped_event</strong>  <span class="extras">(readonly, protected)</span>
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="RubyExecutor.html#stopped_event-instance_method" title="Concurrent::RubyExecutor#stopped_event (method)">RubyExecutor</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute stopped_event</p>


  </div>
</div>
<div class="tags">
  

</div>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="<<-instance_method">
  
    - (<tt>self</tt>) <strong>&lt;&lt;</strong>(task) 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="RubyExecutor.html#%3C%3C-instance_method" title="Concurrent::RubyExecutor#&lt;&lt; (method)">RubyExecutor</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Submit a task to the executor for asynchronous processing.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>task</span>
      
      
        <span class='type'>(<tt>Proc</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the asynchronous task to perform</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>returns itself</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="can_overflow?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>can_overflow?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Does the task queue have a maximum size?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>True if the task queue has a maximum size else false.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


104
105
106</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/executor/ruby_thread_pool_executor.rb', line 104</span>

<span class='kw'>def</span> <span class='id identifier rubyid_can_overflow?'>can_overflow?</span>
  <span class='ivar'>@max_queue</span> <span class='op'>!=</span> <span class='int'>0</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="init_executor-instance_method">
  
    - (<tt>Object</tt>) <strong>init_executor</strong>  <span class="extras">(protected)</span>
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="RubyExecutor.html#init_executor-instance_method" title="Concurrent::RubyExecutor#init_executor (method)">RubyExecutor</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Initialize the executor by creating and initializing all the
internal synchronization objects.</p>


  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="kill-instance_method">
  
    - (<tt>Object</tt>) <strong>kill</strong> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="RubyExecutor.html#kill-instance_method" title="Concurrent::RubyExecutor#kill (method)">RubyExecutor</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Begin an immediate shutdown. In-progress tasks will be allowed to
complete but enqueued tasks will be dismissed and no new tasks
will be accepted. Has no additional effect if the thread pool is
not running.</p>


  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="length-instance_method">
  
    - (<tt>Integer</tt>) <strong>length</strong> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='current_length-instance_method'>current_length</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The number of threads currently in the pool.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the length</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


111
112
113</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/executor/ruby_thread_pool_executor.rb', line 111</span>

<span class='kw'>def</span> <span class='id identifier rubyid_length'>length</span>
  <span class='id identifier rubyid_mutex'>mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_running?'>running?</span> <span class='op'>?</span> <span class='ivar'>@pool</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>:</span> <span class='int'>0</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="log-instance_method">
  
    - (<tt>Object</tt>) <strong>log</strong>(level, progname, message = nil, &amp;block) 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Logging.html#log-instance_method" title="Concurrent::Logging#log (method)">Logging</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Logs through <span class='object_link'><a href="Configuration.html#logger-instance_method" title="Concurrent::Configuration#logger (method)">Configuration#logger</a></span>, it can be overridden by setting @logger</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>level</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>one of Logger::Severity constants</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>progname</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>e.g. a path of an Actor</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>message</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>when nil block is used to generate the message</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yield Returns:</p>
<ul class="yieldreturn">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>a message</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="post-instance_method">
  
    - (<tt>Boolean</tt>) <strong>post</strong>(*args) { ... }
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="RubyExecutor.html#post-instance_method" title="Concurrent::RubyExecutor#post (method)">RubyExecutor</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Submit a task to the executor for asynchronous processing.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>args</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>zero or more arguments to be passed to the task</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>the asynchronous task to perform</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p><code>true</code> if the task is queued, <code>false</code> if the executor
is not running</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>if no task is given</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="queue_length-instance_method">
  
    - (<tt>Integer</tt>) <strong>queue_length</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>The number of tasks in the queue awaiting execution.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the queue_length</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


120
121
122</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/executor/ruby_thread_pool_executor.rb', line 120</span>

<span class='kw'>def</span> <span class='id identifier rubyid_queue_length'>queue_length</span>
  <span class='id identifier rubyid_mutex'>mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_running?'>running?</span> <span class='op'>?</span> <span class='ivar'>@queue</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>:</span> <span class='int'>0</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="remaining_capacity-instance_method">
  
    - (<tt>Integer</tt>) <strong>remaining_capacity</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Number of tasks that may be enqueued before reaching <code>max_queue</code> and rejecting
new tasks. A value of -1 indicates that the queue may grow without bound.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the remaining_capacity</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


128
129
130</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/executor/ruby_thread_pool_executor.rb', line 128</span>

<span class='kw'>def</span> <span class='id identifier rubyid_remaining_capacity'>remaining_capacity</span>
  <span class='id identifier rubyid_mutex'>mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='lbrace'>{</span> <span class='ivar'>@max_queue</span> <span class='op'>==</span> <span class='int'>0</span> <span class='op'>?</span> <span class='op'>-</span><span class='int'>1</span> <span class='op'>:</span> <span class='ivar'>@max_queue</span> <span class='op'>-</span> <span class='ivar'>@queue</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="running?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>running?</strong> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="RubyExecutor.html#running%3F-instance_method" title="Concurrent::RubyExecutor#running? (method)">RubyExecutor</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Is the executor running?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p><code>true</code> when running, <code>false</code> when shutting down or shutdown</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="serialized?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>serialized?</strong> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Executor.html#serialized%3F-instance_method" title="Concurrent::Executor#serialized? (method)">Executor</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'><p>Always returns <code>false</code></p>
</div>
  </div>

<p>Does this executor guarantee serialization of its operations?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>True if the executor guarantees that all operations
will be post in the order they are received and no two operations may
occur simultaneously. Else false.</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="shutdown-instance_method">
  
    - (<tt>Object</tt>) <strong>shutdown</strong> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="RubyExecutor.html#shutdown-instance_method" title="Concurrent::RubyExecutor#shutdown (method)">RubyExecutor</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Begin an orderly shutdown. Tasks already in the queue will be executed,
but no new tasks will be accepted. Has no additional effect if the
thread pool is not running.</p>


  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="shutdown?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>shutdown?</strong> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="RubyExecutor.html#shutdown%3F-instance_method" title="Concurrent::RubyExecutor#shutdown? (method)">RubyExecutor</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Is the executor shutdown?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p><code>true</code> when shutdown, <code>false</code> when shutting down or running</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="shuttingdown?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>shuttingdown?</strong> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="RubyExecutor.html#shuttingdown%3F-instance_method" title="Concurrent::RubyExecutor#shuttingdown? (method)">RubyExecutor</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Is the executor shuttingdown?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p><code>true</code> when not running and not shutdown, else <code>false</code></p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="status-instance_method">
  
    - (<tt>Object</tt>) <strong>status</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns an array with the status of each thread in the pool</p>

<p>This method is deprecated and will be removed soon.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


135
136
137
138</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/executor/ruby_thread_pool_executor.rb', line 135</span>

<span class='kw'>def</span> <span class='id identifier rubyid_status'>status</span>
  <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>[DEPRECATED] `status` is deprecated and will be removed soon.</span><span class='tstring_end'>&#39;</span></span>
  <span class='id identifier rubyid_mutex'>mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='lbrace'>{</span> <span class='ivar'>@pool</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_worker'>worker</span><span class='op'>|</span> <span class='id identifier rubyid_worker'>worker</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="wait_for_termination-instance_method">
  
    - (<tt>Boolean</tt>) <strong>wait_for_termination</strong>(timeout = nil) 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="RubyExecutor.html#wait_for_termination-instance_method" title="Concurrent::RubyExecutor#wait_for_termination (method)">RubyExecutor</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'><p>Does not initiate shutdown or termination. Either <code>shutdown</code> or <code>kill</code>
must be called before this method (or on another thread).</p>
</div>
  </div>

<p>Block until executor shutdown is complete or until <code>timeout</code> seconds have
passed.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>timeout</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the maximum number of seconds to wait for shutdown to complete</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p><code>true</code> if shutdown complete or false on <code>timeout</code></p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Wed Nov 26 09:45:08 2014 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.1.5).
</div>

<script>
//  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
//    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
//      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
//  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
//
//  ga('create', 'UA-4005004-8', 'pitr.ch');
//  ga('send', 'pageview');
</script>

  </body>
</html>